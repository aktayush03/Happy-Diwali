<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diwali Greeting Generator - AKT.Ayush</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<!-- html2canvas for download -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
  :root{
    --gold:#ffd54f; --orange:#ff9800; --bg-dark:#1b0027; --bg-black:#000;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:'Poppins',sans-serif;background:radial-gradient(circle at top,var(--bg-dark) 0%,var(--bg-black) 80%);color:#fff;min-height:100vh;position:relative;overflow-x:hidden;}
  header{padding:20px;text-align:center;}
  header h1{font-family:'Dancing Script',cursive;font-size:2.5rem;color:var(--gold);text-shadow:0 0 20px orange;}
  .controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:20px 0;}
  .controls input, .controls select{padding:10px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.15);background:rgba(255,255,255,0.02);color:#fff;min-width:150px;}
  .controls button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--gold),var(--orange));color:#000;font-weight:700;cursor:pointer;}
  .controls .secondary{background:transparent;border:1px solid rgba(255,215,0,0.15);color:var(--gold);}
  .card{position:relative;max-width:800px;margin:20px auto;padding:30px;border-radius:18px;border:1px solid rgba(255,215,0,0.06);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));text-align:center;overflow:hidden;min-height:420px;display:flex;flex-direction:column;justify-content:center;align-items:center;}
  .card h2{font-family:'Dancing Script',cursive;font-size:3rem;color:var(--gold);margin-bottom:10px;text-shadow:0 0 20px orange;}
  .card .to{font-size:1.5rem;margin-bottom:10px;}
  .card .message{font-size:1.05rem;line-height:1.6;color:#ffefc5;max-width:720px;}
  .card .from{margin-top:15px;font-weight:700;color:#fff;opacity:0.9;}
  .diya{position:absolute;width:60px;height:60px;border-radius:50%;background:radial-gradient(circle at center,var(--gold) 0%,var(--orange) 60%,transparent 70%);animation:float 6s ease-in-out infinite;opacity:0.8;cursor:pointer;transition:all .25s;box-shadow:0 6px 30px rgba(255,160,0,0.15);}
  .diya.left{left:8%} .diya.mid{left:46%} .diya.right{right:8%}
  @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-18px)}}
  .glow{box-shadow:0 0 40px 18px rgba(255,200,60,0.22);filter:brightness(1.3);animation:flicker .18s infinite alternate;transform:scale(1.06);}
  @keyframes flicker{from{filter:brightness(1)}to{filter:brightness(1.45)}}
  .lantern{position:absolute;bottom:-120px;width:46px;height:66px;border-radius:10px 10px 0 0;background:linear-gradient(to top,var(--orange),var(--gold));box-shadow:0 0 18px rgba(255,160,0,0.18);animation:rise 10s linear infinite;opacity:0.9}
  .lantern.l1{left:10%;animation-delay:0s}.lantern.l2{left:32%;animation-delay:2.2s}.lantern.l3{left:62%;animation-delay:5s}.lantern.l4{left:80%;animation-delay:1.2s}
  @keyframes rise{0%{transform:translateY(0) scale(1)}100%{transform:translateY(-120vh) scale(.75);opacity:0}}
  .firework{position:absolute;width:5px;height:5px;background:var(--gold);border-radius:50%;animation:explode 2s ease-out infinite;opacity:0.9}
  .firework.f1{left:20%;top:16%;animation-delay:0s}.firework.f2{left:50%;top:10%;animation-delay:.6s}.firework.f3{left:78%;top:20%;animation-delay:1.2s}
  @keyframes explode{0%{transform:scale(0);opacity:1}100%{transform:scale(2.2) translateY(-70px);opacity:0}}
  .sparkle{position:absolute;width:7px;height:7px;background:var(--gold);border-radius:50%;animation:spark 1s ease-out forwards}
  @keyframes spark{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-70px) scale(.2)}}
  footer{text-align:center;margin-top:20px;color:#ffdb8a;opacity:0.9;}
  @media (max-width:880px){.controls input{min-width:120px}.card h2{font-size:2.2rem}}
</style>
</head>
<body>
<header>
  <h1>‚ú® Happy Diwali ‚ú®</h1>
</header>

<div class="controls">
  <input id="fromInput" placeholder="Your Name (From)" />
  <input id="toInput" placeholder="Receiver Name (To)" />
  <select id="wishSelect">
    <option value="May your life sparkle brighter than a thousand diyas!">Sparkling Life!</option>
    <option value="Let the glow of Diwali light your path toward joy and success.">Path of Joy</option>
    <option value="May every diya you light inspire hope, peace, and prosperity.">Inspiring Light</option>
    <option value="Wishing you endless happiness, prosperity, and divine blessings.">Endless Happiness</option>
    <option value="May this Diwali bring warmth, love, and laughter to your home.">Warmth & Love</option>
    <option value="Illuminate your life with positivity and the spirit of togetherness.">Togetherness</option>
  </select>
  <button id="generateBtn">Generate</button>
  <button class="secondary" id="clearBtn">Clear</button>
</div>

<div class="controls">
  <select id="styleSelect">
    <option value="style1">Golden Diyas</option>
    <option value="style2">Floating Lanterns</option>
    <option value="style3">Fireworks Night Sky</option>
  </select>
  <button id="copyLinkBtn">Copy Link</button>
  <button id="downloadBtn">Download PNG</button>
  <button id="previewBtn" class="secondary">Preview in New Tab</button>
</div>

<div class="card" id="card">
  <h2 id="title">‚ú® Happy Diwali ‚ú®</h2>
  <div class="to" id="toText">Wishing you brightness and joy!</div>
  <div class="message" id="messageText">Select a wish or type your own above.</div>
  <div class="from" id="fromText">‚Äî With love, <b>AKT.Ayush</b></div>

  <!-- Decorations -->
  <div class="diya left" id="diya1"></div>
  <div class="diya mid" id="diya2"></div>
  <div class="diya right" id="diya3"></div>

  <div class="lantern l1"></div>
  <div class="lantern l2"></div>
  <div class="lantern l3"></div>
  <div class="lantern l4"></div>

  <div class="firework f1"></div>
  <div class="firework f2"></div>
  <div class="firework f3"></div>
</div>

<footer>Made with ‚ù§Ô∏è by <b>AKT.Ayush</b> | ¬© 2025 | #LightUpTheWorldWithLove</footer>

<audio id="bg-music" loop muted autoplay>
  <source src="https://cdn.pixabay.com/audio/2023/10/15/audio_10e9df2e2b.mp3" type="audio/mpeg">
</audio>
<button id="music-btn" style="position:fixed; right:18px; bottom:18px; z-index:9999; background:var(--gold); color:#000; border:none; padding:10px 12px; border-radius:22px; font-weight:700; cursor:pointer;">üîá Unmute</button>

<script>
function qs(sel){return document.querySelector(sel);}
function qsa(sel){return Array.from(document.querySelectorAll(sel));}
function escapeHtml(unsafe){return unsafe.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'", '&#039;');}
function spawnSparkles(x,y,count=12){for(let i=0;i<count;i++){const s=document.createElement('div');s.className='sparkle';const ox=(Math.random()*120-60);const oy=(Math.random()*120-60);s.style.left=(x+ox)+'px';s.style.top=(y+oy)+'px';s.style.width=(4+Math.random()*6)+'px';s.style.height=s.style.width;document.body.appendChild(s);setTimeout(()=>s.remove(),1100+Math.random()*600);}}
function randomGold(){const arr=['#ffd54f','#ffca28','#ffab40','#ffc107'];return arr[Math.floor(Math.random()*arr.length)];}

document.addEventListener('DOMContentLoaded',()=>{
  const music=qs('#bg-music');const mbtn=qs('#music-btn');mbtn.addEventListener('click',()=>{music.muted=!music.muted;mbtn.textContent=music.muted?'üîá Unmute':'üîä Mute';});
  qsa('.diya').forEach(d=>d.addEventListener('click',e=>{d.classList.toggle('glow');e.stopPropagation();}));
  document.addEventListener('click',e=>{if(e.target.closest('.controls')||e.target.id==='music-btn')return;spawnSparkles(e.pageX,e.pageY,10);});

  qs('#generateBtn').addEventListener('click',()=>{
    const to=qs('#toInput').value.trim();const from=qs('#fromInput').value.trim();const msg=qs('#wishSelect').value;
    if(!to){alert('Please enter receiver\'s name');qs('#toInput').focus();return;}
    qs('#toText').textContent=`Happy Diwali, ${escapeHtml(to)}!`;
    qs('#messageText').textContent=msg;
    qs('#fromText').innerHTML=from?`‚Äî With love, <b>${escapeHtml(from)}</b>`:'‚Äî With love, <b>AKT.Ayush</b>';
    history.replaceState({},'',buildShareURL(to,from,msg));
  });

  qs('#clearBtn').addEventListener('click',()=>{
    qs('#toInput').value='';qs('#fromInput').value='';qs('#toText').textContent='Wishing you brightness and joy!';
    qs('#messageText').textContent='Select a wish or type your own above.';qs('#fromText').innerHTML='‚Äî With love, <b>AKT.Ayush</b>';
    history.replaceState({},'',window.location.pathname);
  });

  qs('#copyLinkBtn').addEventListener('click',async()=>{
    const ok=await navigator.clipboard.writeText(window.location.href);if(ok!==undefined)alert('Link copied!');else prompt('Copy this link',window.location.href);
  });

  qs('#previewBtn').addEventListener('click',()=>{window.open(window.location.href,'_blank','noopener');});
  qs('#downloadBtn').addEventListener('click',()=>{
    html2canvas(qs('#card'),{scale:2,backgroundColor:null,useCORS:true}).then(canvas=>{const link=document.createElement('a');link.download=`Diwali_Greeting_${Date.now()}.png`;link.href=canvas.toDataURL('image/png');link.click();});
  });

  qs('#styleSelect').addEventListener('change',(e)=>{
    const val=e.target.value;
    const c=qs('#card');c.style.background='linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01))';
    if(val==='style1'){c.style.background='linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01))';}
    else if(val==='style2'){c.style.background='linear-gradient(to top,#1a0a2a,#3a1a50)';}
    else if(val==='style3'){c.style.background='linear-gradient(to top,#000012,#2a0035)';}
  });

  // Build shareable URL
  function buildShareURL(to, from, msg) {
    const u = new URL(window.location.href.split('?')[0]);
    if(to) u.searchParams.set('to', to);
    if(from) u.searchParams.set('from', from);
    if(msg) u.searchParams.set('msg', msg);
    return u.toString();
  }

  // Load data from URL if present
  const params = new URLSearchParams(window.location.search);
  if(params.get('to')) qs('#toInput').value = params.get('to');
  if(params.get('from')) qs('#fromInput').value = params.get('from');
  if(params.get('msg')) qs('#wishSelect').value = params.get('msg');
  if(params.get('to')) qs('#generateBtn').click();

});
</script>
</body>
</html>